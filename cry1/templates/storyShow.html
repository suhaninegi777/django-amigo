<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/stories.css' %}">
    <link rel="stylesheet" href="{% static 'css/column2.css' %}">
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <!-- fontawesome icons -->
    <link rel="stylesheet" href=" https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <!--bootstrap  -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- OWL -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
        integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css"
        integrity="sha512-UTNP5BXLIptsaj5WdKFrkFov94lDx+eBvbKyoe1YAfjeRPC+gT5kyZ10kOHCfNZqEui1sxmqvodNUx3KbuYI/A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Document</title>
</head>
<style>
    .owl-carousel {
        position: relative !important;
    }

    .owl-prev,
    .owl-next {
        position: absolute !important;
        top: 5cm !important;
        color: #000 !important;
        padding: 20ps 50ps !important;
        z-index: 999 !important;
        font-size: 80px !important;
    }

    .owl-next {
        right: 1px;
    }
</style>

<body>
    <!-- <p>showing story</p> -->
    <div id="story_watch_outer">
        <div id="story_watch">
            <div>
                <div class="d-flex align-items-center" style="position: absolute; z-index: 999; margin-top: 0.5cm; margin-left: 0.25cm;">
                    <div class="PostkaCircle bg-danger">
                        <div class="PostkaInnerCircle">
                        </div>
                    </div>
                    <span>suhani negi</span>
                </div>
                <div class="owl-carousel owl-theme w-100">
                    {% for url in image_urls %}
                    <div class="item" data-count="{{ forloop.counter }}">
                        <img src="{{ url }}"  height="540" alt="Story Image" style="border-radius: 10px; width: 100; object-fit: cover;">
                        <p></p>
                    </div>
                    {% endfor %}
                    <!-- <div class="owl-nav">
                    <button type="button" role="presentation" class="owl-prev">
                        <span aria-label="Previous" id="Previous">‹</span>
                    </button>
                    <button type="button" role="presentation" class="owl-next">
                        <span aria-label="Next">›</span>
                    </button>
                </div> -->
                </div>
            </div>
        </div>
        <script>
            $(document).ready(function () {
                let current = 0
                var totallen = $('.item img').length
                // totallen=$('.item').data('counter')
                var ow = $('.owl-carousel').owlCarousel({
                    slideSpeed: 100,
                    // loop: true,
                    margin: 10,
                    nav: true,
                    autoplay: true,
                    autoplaytimeout: 1000,
                    // afterAction: moved,
                    responsive: {
                        0: {
                            items: 1
                        },
                        600: {
                            items: 1
                        },
                        1000: {
                            items: 1
                        }
                    }
                })

                ow.on('changed.owl.carousel', function (e) {
                    if (e.namespace && e.property.name === 'position'
                        && e.relatedTarget.relative(e.property.value) === e.relatedTarget.items().length - 1) {

                        setTimeout(function () {
                            window.location.assign('/profile/')
                        }, 2000);
                        console.log('asdfghjkl')
                    }
                    else {
                        setTimeout(function () {
                            window.location.assign('/profile/')
                        }, 2000);
                    }
                })
            })

        </script>
</body>

</html>